package com.example.zzz;

import java.lang.reflect.Method;
import java.text.DecimalFormat;
import java.util.Collection;
import java.util.List;

import android.R.integer;
import android.R.string;
import android.app.Activity;
import android.content.Context;
import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.preference.CheckBoxPreference;
import android.provider.Settings;
import android.util.Base64;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import com.sparkle.webservice.Defaults;
import com.sparkle.webservice.WebServer;
/**
 * AUTHER wzb<wangzhibin_x@foxmail.com> 2016-2-18ÏÂÎç04:16:50
 */
public class MainActivity extends Activity implements OnClickListener {

	Button btn1,btn2;
	EditText et1;
	String str1="";
	String testString=null;
	StringBuilder sb=null;
	CheckBoxPreference cbp;
	Context mContext;
	
	
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		// TODO Auto-generated method stub
		super.onCreate(savedInstanceState);
		setContentView(R.layout.main);
		mContext=this;
		btn1 = (Button) findViewById(R.id.btn1);
		et1 = (EditText) findViewById(R.id.et1);
		btn1.setOnClickListener(this);
		btn2.setOnClickListener(new OnClickListener() {
			
			@Override
			public void onClick(View v) {
				// TODO Auto-generated method stub
				
			}
		});
		//boolean xxx=setWifiApEnabled(true);
		//Log.d("wzb","xx="+xxx);
		//initWebServer();
		//testTo();
		//byteToBase64();
//		String bgData="550e0311040a0018008c012a0000";
//		int bg=Integer.valueOf(bgData.substring(20,22)+bgData.substring(18,20),16);
//		Log.d("wzb","bg="+bg);
//		DecimalFormat df = new DecimalFormat("#.0"); 
//		String bg_value=df.format((double)bg/18);
//		Log.d("wzb",""+bg_value);
		String str[]=new String[]{};
		for(int i=0;i<str.length;i++){
			
		}
	}
	
	void base64StringToByte(){
		
		String base64String="SlhKMDAwMDA0MDAwMDAwMDMxNTc2ODIxMTAxNzE1ICAzMjAgjoyJgnt1cnFxcXJyc3R1dHNyb2xqZ2NhYWFgX11cWVZVVFRUVFRTU1JSUVFQT01LSUdFREVGSU9XYm97ipejq7CxrqiimpOQj46MioaBe3d0cm9vcXJzdHV1dnV0cm5raGZjYmJiYWBfXl5dXFtbW1pXVVRTU1NRT05OTU5QVmFxgY6Zo6qwtba1s66noZqVkpKQjoqDfXZzb25tbW5ubm9xcnFycW1pZWFeW1lWVlZWVlZWVlVVVFNSUU9OTk5OTk1KSEdHSlJgcoKQmqKpsLW3t7SwqaSem5iXlZKNhoF7eHVzb25tbG1ucXN0c3FtaWZiYF9eXFtbW1pZWVlXVlVVVVZZWlpXVlRSUVFQT05OT1RebX6Om6aus7e6ure0r6qmo6KjoZyTiX94dXRzcm9ta2pqaWprbGxqaGVhXl1dXFtbWllXV1VVV1paWlpZV1ZVVVRSUVBNSkhGRUVFRkhQXGt7ipeiq7K2urq3samhmZOQkI+MiYR+eXZzb21samlpamtsbGtpZ2ViX11bWldWVlVVVVVTU1JSUlJRUFBQT01LSUZEQ0NFSlRgbn2KlZ6mrbCxr66qpJ2YlZGNh4N/eXZybmxraWZlY2ZobG5vbWpmYV9dWldWVFNSUlJRUVFQT05OTU1LSkpJSEdGRENDQ0NESVNjdomaqLG2uru6trKrpqGbmZqamZaPhn54dnZ1dHJvb29xcnJzdHNxbWhlYV9dXVxbW1pZVlVTUVBPUFBQT05NS0lIR0ZERENDRUtXaHqLmaawt72+vbqzq6Obl5OVk5EA"+
		"SlhKMDAwMDA0MDAwMDAwMDMxNTc2ODIxMTAxNzE1ICAzMjAgamlnZmViYV9dXFxdYGZueICJkp2osre5t7SzsrOzsrCrp6KZko6MjY6PkJKXmpubmZaSj4yJh4SCgH56eHd1c3FxcXFxcXFubm5ubm5tbW1vcW9ubGtramdjYWBgY2lxeYWQnKizvcPJy8vLysjFwLy3s6+rrq2noZmVkIyLi4yOkJOTlZORjoyLiomFgoB9e3l5eXh3dnZ1dnd3dXJua2hoaGloZmNhX1xaVlRSUFBTW2ZxfouYo6uwsrO0tbSyr6uppqKclo+Jg396d3Vzc3R1dnd3d3Z2dnd3dnJua2ppaWhoZ2dmZWNjYmFgX15cWllaXFxaV1VTUVFQUFBPTk9QU1lhanR/iZCZnqKjo5+bl5WRjYeCf3t5d3Ryb29vb29xcnFvbW1sa2ppZ2VhX15eXVtZWVpcXFxbW1taWVlXVlVTUVBOTk5OT1BRVFxjbXeBi5WbnqGioZ6cmpiVko6Jg397eXd1c3Jyc3V3eHh4dnRycW9ubGlnZWNiYWFgYF9fX19fX19fX15eX15dXFxbWldVVFNUVlphanV/ipafqK2wsLCwr62qpqOfnJmVj4mEgoKCgYKCgYGBgYKCg4KAfnl3dnZ1c3FubGtra2tramloaGdmZWVjY2JgX11bWllZV1ZVVVleaHSAi5ahqbC1t7m6urm5t7a0sq6mnZeQjYyMjIuMjI2NjIqHh4mKi4mFgX57enp6eHZ1dXNxcXNzcnFvbWtqaWdmZWNiYWBfX11cXFxbWVlcY3KBkJ6rtby/v8DBwcC+vbu2sq2mnZOLhH97eXkA";
	}
	
	void testTo(){
		double[] data=new double[]{2.2593,8.3651,0.3210,108.4896,1004.7120};
		double[] data1=new double[]{3.7128,13.3239,0.2625,180.8847,657.0235};
		double[] data2=new double[]{1.6850,4.9143,0.3580,61.1992,1515.0510};
		double[] data3=new double[]{1.4004, 4.8400,  0.4047, 63.8586 , 1750.1650};
		//double y=-36.29597-9.78733*data2[0]+9.95341*data2[1]+256.33560*data2[2]-0.08916*data2[3]+0.03333*data2[4];
		double y=95.23805-4.57543*data3[0]-12.31469*data3[1]+128.00745*data3[2]+1.08628*data3[3]-0.01737*data3[4];
		Log.d("wzb","y="+y);
		
	}
	
	void byteToBase64(){
//        int[] odata = new int[]{0x4A,0x58,0x4A,0x30,0x30,0x30,0x30,0x30,0x34,0x30,0x30,0x30,0x30,0x30,0x30,0x30
//                ,0x32,0x39,0x30,0x31,0x37,0x35,0x31,0x39,0x31,0x30,0x31,0x34,0x33,0x31,0x20,0x20
//                ,0x32,0x36,0x32,0x20,
//0x71,0x70,0x70,0x70,0x71,0x72,0x73,0x73,0x73,0x72,0x72,0x72,0x72,0x73,0x74,0x74,0x73,0x72,0x72,0x71,0x70,0x6E,0x6E,0x6E,0x6D,0x6D,0x6C,0x6B,0x6A,0x69,0x69,0x6C,0x78,0x90,0xAE,0xC9,0xD6,0xDB,0xDC,0xDC,0xDA,0xD7,0xD2,0xCA,0xC1,0xB6,0xAD,0xA5,0x9F,0x9A,0x95,0x91,0x8D,0x8A,0x86,0x82,0x7F,0x7C,0x7C,0x79,0x81,0x84,0x88,0x8C,0x90,0x94,0x97,0x98,0x98,0x96,0x93,0x8F,0x8C,0x88,0x84,0x81,0x7F,0x7C,0x7A,0x79,0x78,0x77,0x77,0x76,0x76,0x76,0x75,0x75,0x74,0x74,0x74,0x74,0x74,0x75,0x75,0x76,0x78,0x79,0x79,0x79,0x79,0x79,0x78,0x77,0x76,0x75,0x74,0x73,0x72,0x71,0x70,0x70,0x72,0x7B,0x8E,0xAA,0xC6,0xD5,0xDB,0xDC,0xDC,0xDB,0xD9,0xD6,0xCF,0xCA,0xC2,0xB9,0xB0,0xA9,0xA3,0x9F,0x9C,0x99,0x96,0x92,0x8D,0x88,0x84,0x81,0x80,0x82,0x85,0x89,0x8E,0x92,0x95,0x97,0x98,0x97,0x96,0x93,0x90,0x8E,0x8B,0x88,0x86,0x83,0x80,0x7E,0x7C,0x7A,0x79,0x79,0x79,0x79,0x79,0x79,0x79,0x78,0x77,0x77,0x76,0x77,0x78,0x78,0x79,0x79,0x79,0x79,0x79,0x79,0x79,0x7A,0x7A,0x7B,0x7B,0x7B,0x7A,0x79,0x78,0x77,0x76,0x75,0x75,0x76,0x7B,0x8B,0xA6,0xC3,0xD5,0xDC,0xDE,0xDE,0xDD,0xDB,0xD8,0xD4,0xCE,0xC6,0xBE,0xB5,0xAF,0xAA,0xA5,0xA2,0x9F,0x9C,0x97,0x93,0x8E,0x89,0x85,0x82,0x81,0x81,0x83,0x85,0x89,0x8C,0x8E,0x90,0x91,0x91,0x91,0x8F,0x8D,0x89,0x85,0x82,0x7F,0x7C,0x7A,0x79,0x79,0x78,0x78,0x77,0x76,0x75,0x75,0x76,0x77,0x78,0x78,0x79,0x79,0x79,0x7A,0x7B,0x7C,0x7E,0x7F,0x80,0x7F,0x7E,0x7C,0x7B,0x7B,0x7B,0x7B,0x7B,0x7B,0x7A,0x79,0x79,0x77,0x77,0x76,0x76,0x77,0x79,0x80,0x91,0xAD,0xCA,0xD9,0xDD,0xDE,0xDE,0xDD,0xDB,0xD7,0xD3,0xCD,0xC5,0xBD,0xB5,0xAF,0xA9,0xA4,0x9F,0x9C,0x98,0x93,0x8D,0x86,0x80,0x7C,0x7A,0x7B,0x7E,0x83,0x88,0x8C,0x8F,0x8F,0x8F,0x89,0x8B,0x88,0x85,0x82,0x7E,0x7B,0x78,0x75,0x74,0x6E,0x72,0x71,0x71,0x71,0x70,0x6F,0x6E,0x6E,0x6F,0x6E,0x6F,0x6F,0x6F,0x6E,0x6E,0x6E,0x6F,0x70,0x70,0x6E,0x6F,0x6E,0x6D,0x6C,0x6C,0x6C,0x6C,0x6D,0x6C,0x69,0x6A,0x69,0x68,0x68,0x6A,0x74,0x8A,0xAB,0xC9,0xD6,0xDC,0xDC,0xDB,0xD9,0xD5,0xCF,0xC5,0xBB,0xB0,0xA5,0xA0,0x9B,0x98,0x93,0x8D,0x88,0x82,0x7D,0x78,0x77,0x7A,0x7F,0x85,0x8C,0x92,0x96,0x98,0x98,0x96,0x93,0x90,0x8D,0x89,0x85,0x82,0x7F,0x7C,0x7B,0x79,0x79,0x78,0x78,0x77,0x77,0x77,0x77,0x77,0x78,0x79,0x7A,0x7A,0x79,0x78,0x78,0x79,0x78,0x78,0x78,0x79,0x79,0x78,0x76,0x74,0x71,0x6F,0x6D,0x6C,0x6B,0x6C,0x70,0x7B,0x93,0xB4,0xCE,0xD9,0xDD,0xDD,0xDC,0xD9,0xD4,0xCD,0xC3,0xB9,0xB1,0xAB,0xA7,0xA4,0x9F,0x9B,0x96,0x8F,0x87,0x81,0x7C,0x7A,0x7B,0x7E,0x84,0x89,0x8E,0x91,0x92,0x91,0x8F,0x8C,0x8A,0x86,0x82,0x7E,0x7A,0x77,0x74,0x73,0x74,0x74,0x73,0x72,0x71,0x71,0x71,0x6F,0x6E,0x6D,0x6F,0x70,0x71,0x70,0x70,0x70,0x72,0x73,0x74,0x74,0x73,0x72,0x72,0x71,0x70,0x70,0x6F,0x70,0x6F,0x6D,0x6B,0x6A,0x69,0x6A,0x6D,0x7A,0x94,0xB7,0xD1,0xDB,0xDE,0xDE,0xDC,0xDA,0xD7,0xD2,0xCC,0xC4,0xBB,0xB4,0xAE,0xAA,0xA6,0xA3,0xA1,0x9E,0x98,0x90,0x88,0x80,0x7A,0x79,0x7A,0x7D,0x81,0x85,0x88,0x8A,0x89,0x88,0x86,0x83,0x7F,0x7B,0x76,0x73,0x71,0x6F,0x6E,0x6D,0x6C,0x6B,0x6A,0x69,0x69,0x69,0x69,0x69,0x69,0x68,0x67,0x67,0x67,0x67,0x67,0x67,0x68,0x68,0x67,0x67,0x66,0x66,0x66,0x66,0x66,0x65,0x64,0x64,0x63,0x62,0x62,0x60,0x5F,0x5E,0x5D,0x5D,0x5E,0xFF
//};
        
        int[] odata = new int[]{0x4A,0x58,0x4A,0x30,0x30,0x30,0x30,0x30,0x34,0x30,0x30,0x30,0x30,0x30,0x30,0x30
                ,0x32,0x39,0x30,0x31,0x37,0x35,0x31,0x39,0x31,0x30,0x31,0x34,0x33,0x31,0x20,0x20
                ,0x32,0x36,0x32,0x20,
0x71,0x70,0x70,0x70,0x71,0x72,0x73,0x73,0x73,0x72,0x72,0x72,0x72,0x73,0x74,0x74,0x73,0x72,0x72,0x71,0x70,0x6E,0x6E,0x6E,0x6D,0x6D,0x6C,0x6B,0x6A,0x69,0x69,0x6C,0x78,0x90,0xAE,0xC9,0xD6,0xDB,0xDC,0xDC,0xDA,0xD7,0xD2,0xCA,0xC1,0xB6,0xAD,0xA5,0x9F,0x9A,0x95,0x91,0x8D,0x8A,0x86,0x82,0x7F,0x7C,0x7C,0x79,0x81,0x84,0x88,0x8C,0x90,0x94,0x97,0x98,0x98,0x96,0x93,0x8F,0x8C,0x88,0x84,0x81,0x7F,0x7C,0x7A,0x79,0x78,0x77,0x77,0x76,0x76,0x76,0x75,0x75,0x74,0x74,0x74,0x74,0x74,0x75,0x75,0x76,0x78,0x79,0x79,0x79,0x79,0x79,0x78,0x77,0x76,0x75,0x74,0x73,0x72,0x71,0x70,0x70,0x72,0x7B,0x8E,0xAA,0xC6,0xD5,0xDB,0xDC,0xDC,0xDB,0xD9,0xD6,0xCF,0xCA,0xC2,0xB9,0xB0,0xA9,0xA3,0x9F,0x9C,0x99,0x96,0x92,0x8D,0x88,0x84,0x81,0x80,0x82,0x85,0x89,0x8E,0x92,0x95,0x97,0x98,0x97,0x96,0x93,0x90,0x8E,0x8B,0x88,0x86,0x83,0x80,0x7E,0x7C,0x7A,0x79,0x79,0x79,0x79,0x79,0x79,0x79,0x78,0x77,0x77,0x76,0x77,0x78,0x78,0x79,0x79,0x79,0x79,0x79,0x79,0x79,0x7A,0x7A,0x7B,0x7B,0x7B,0x7A,0x79,0x78,0x77,0x76,0x75,0x75,0x76,0x7B,0x8B,0xA6,0xC3,0xD5,0xDC,0xDE,0xDE,0xDD,0xDB,0xD8,0xD4,0xCE,0xC6,0xBE,0xB5,0xAF,0xAA,0xA5,0xA2,0x9F,0x9C,0x97,0x93,0x8E,0x89,0x85,0x82,0x81,0x81,0x83,0x85,0x89,0x8C,0x8E,0x90,0x91,0x91,0x91,0x8F,0x8D,0x89,0x85,0x82,0x7F,0x7C,0x7A,0x79,0x79,0x78,0x78,0x77,0x76,0x75,0x75,0x76,0x77,0x78,0x78,0x79,0x79,0x79,0x7A,0x7B,0x7C,0x7E,0x7F,0x80,0x7F,0x7E,0x7C,0x7B,0x7B,0x7B,0x7B,0x7B,0x7B,0x7A,0x79,0x79,0x77,0x77,0x76,0x76,0x77,0x79,0x80,0x91,0xAD,0xCA,0xD9,0xDD,0xDE,0xDE,0xDD,0xDB,0xD7,0xD3,0xCD,0xC5,0xBD,0xB5,0xAF,0xA9,0xA4,0x9F,0x9C,0x98,0x93,0x8D,0x86,0x80,0x7C,0x7A,0x7B,0x7E,0x83,0x88,0x8C,0x8F,0x8F,0x8F,0x89,0x8B,0x88,0x85,0x82,0x7E,0x7B,0x78,0x75,0x74,0x6E,0x72,0x71,0x71,0x71,0x70,0x6F,0x6E,0x6E,0x6F,0x6E,0x6F,0x6F,0x6F,0x6E,0x6E,0x6E,0x6F,0x70,0x70,0x6E,0x6F,0x6E,0x6D,0x6C,0x6C,0x6C,0x6C,0x6D,0x6C,0x69,0x6A,0x69,0x68,0x68,0x6A,0x74,0x8A,0xAB,0xC9,0xD6,0xDC,0xDC,0xDB,0xD9,0xD5,0xCF,0xC5,0xBB,0xB0,0xA5,0xA0,0x9B,0x98,0x93,0x8D,0x88,0x82,0x7D,0x78,0x77,0x7A,0x7F,0x85,0x8C,0x92,0x96,0x98,0x98,0x96,0x93,0x90,0x8D,0x89,0x85,0x82,0x7F,0x7C,0x7B,0x79,0x79,0x78,0x78,0x77,0x77,0x77,0x77,0x77,0x78,0x79,0x7A,0x7A,0x79,0x78,0x78,0x79,0x78,0x78,0x78,0x79,0x79,0x78,0x76,0x74,0x71,0x6F,0x6D,0x6C,0x6B,0x6C,0x70,0x7B,0x93,0xB4,0xCE,0xD9,0xDD,0xDD,0xDC,0xD9,0xD4,0xCD,0xC3,0xB9,0xB1,0xAB,0xA7,0xA4,0x9F,0x9B,0x96,0x8F,0x87,0x81,0x7C,0x7A,0x7B,0x7E,0x84,0x89,0x8E,0x91,0x92,0x91,0x8F,0x8C,0x8A,0x86,0x82,0x7E,0x7A,0x77,0x74,0x73,0x74,0x74,0x73,0x72,0x71,0x71,0x71,0x6F,0x6E,0x6D,0x6F,0x70,0x71,0x70,0x70,0x70,0x72,0x73,0x74,0x74,0x73,0x72,0x72,0x71,0x70,0x70,0x6F,0x70,0x6F,0x6D,0x6B,0x6A,0x69,0x6A,0x6D,0x7A,0x94,0xB7,0xD1,0xDB,0xDE,0xDE,0xDC,0xDA,0xD7,0xD2,0xCC,0xC4,0xBB,0xB4,0xAE,0xAA,0xA6,0xA3,0xA1,0x9E,0x98,0x90,0x88,0x80,0x7A,0x79,0x7A,0x7D,0x81,0x85,0x88,0x8A,0x89,0x88,0x86,0x83,0x7F,0x7B,0x76,0x73,0x71,0x6F,0x6E,0x6D,0x6C,0x6B,0x6A,0x69,0x69,0x69,0x69,0x69,0x69,0x68,0x67,0x67,0x67,0x67,0x67,0x67,0x68,0x68,0x67,0x67,0x66,0x66,0x66,0x66,0x66,0x65,0x64,0x64,0x63,0x62,0x62,0x60,0x5F,0x5E,0x5D,0x5D,0x5E,0xFF
};
        //test
        int count=0;
        int ret=0;
        for(int j=odata.length-600;j<(odata.length-1);j++){
        	odata[j]=(int) (odata[j]*1.15);
        	//odata[j]=(int) (odata[j]-150);
        	if(odata[j]>255){
        		Log.d("wzb","j="+j+" odata="+odata[j]);
        		odata[j]=255;
        		count++;
        	}
        	if(odata[j]<1){
        		odata[j]=1;
        		ret++;
        	}
        }
        Log.d("wzb","count="+count+"ret="+ret);
        //test
        byte[] ndata=new byte[odata.length];
        for(int i=0;i<odata.length;i++){
        	ndata[i]=(byte) (odata[i]);
        }
        String base64String=Base64.encodeToString(ndata, TRIM_MEMORY_COMPLETE);
        Log.d("wzb",""+base64String);
	}

	
	public boolean setWifiApEnabled(boolean enable){
		WifiManager wifiManager=(WifiManager)mContext.getSystemService(Context.WIFI_SERVICE);
		if(enable){
			wifiManager.setWifiEnabled(false);
		}
		
		try {
			WifiConfiguration apConfiguration=new WifiConfiguration();
			apConfiguration.SSID="HYZL-MIFI";
			apConfiguration.preSharedKey="123123456";
			apConfiguration.status = WifiConfiguration.Status.ENABLED;        
			apConfiguration.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
			apConfiguration.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
			apConfiguration.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
			apConfiguration.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
			apConfiguration.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
			apConfiguration.allowedProtocols.set(WifiConfiguration.Protocol.RSN);
			Method method=wifiManager.getClass().getMethod("setWifiApEnabled", WifiConfiguration.class,Boolean.TYPE);
			Log.d("wzb","1111111");
			return (Boolean)method.invoke(wifiManager, apConfiguration,enable);
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			Log.d("wzb","222");
			return false;
		}
	}
	public void initWebServer(){
		Defaults.setPort(8080);
		Defaults.setRoot("/storage/sdcard0/");
		Defaults.setIndexPage("test.php");
		Context context = getApplicationContext();
		WebServer.Start(context);
	}
	public static String string2Unicode(String string) {
		 
	    StringBuffer unicode = new StringBuffer();
	 
	    for (int i = 0; i < string.length(); i++) {
	 
	        // È¡³öÃ¿Ò»¸ö×Ö·û
	        char c = string.charAt(i);
	 
	        // ×ª»»Îªunicode
	        unicode.append("\\u" + Integer.toHexString(c));
	    }
	 
	    return unicode.toString();
	}

	@Override
	public void onClick(View v) {
		// TODO Auto-generated method stub
		switch (v.getId()) {
		case R.id.btn1:
			str1=et1.getText().toString();
			Log.d("wzb",""+string2Unicode(str1));
			//Context context = getApplicationContext();
			//WebServer.Stop(context);
			break;

		default:
			break;
		}

	}

}
